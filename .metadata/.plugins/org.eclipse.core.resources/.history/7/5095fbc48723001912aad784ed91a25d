set names utf8;
set foreign_key_checks = 0;

drop database if exists ShoppingSite;
create database if not exists ShoppingSite;
use ShoppingSite;



/*
 *		AddressList
 *
 *	ユーザーの登録住所テーブル
 *
 */
drop table if exists addressList;
create table addressList(
	id int not null primary key auto_increment,
	user_id int not null,
	address VARCHAR(255) NOT NULL
);


/*
 * 		Carts
 * 
 * 	ユーザーのカートに入っている商品テーブル
 * 
 */
drop table if exists carts;
create table carts(
	user_id int not null,
	item_id int not null,
	item_count int not null
);



/*
 * 		Items
 * 
 * 	現在販売中の商品テーブル
 * 
 */
drop table if exists items;
create table items(
	id int not null primary key auto_increment,
	item_name varchar(255),
	item_price int,
	item_count int,
	insert_date datetime DEFAULT CURRENT_TIMESTAMP,
	last_add_date datetime DEFAULT CURRENT_TIMESTAMP,
	last_sell_date datetime
	description text,
	seller int not null,
	image_num int not null DEFAULT
);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("鉛筆", 1024, 5261, "すらすら書ける鉛筆", 1, 3);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("消しゴム", 108, 2485, "なんでもスラスラ消せる消しゴムです。", 2, 2);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("ノート", 216, 482, "さらさら書けるノートです！。", 1, 3);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("お茶", 903, 2128, "お茶です。", 3, 0);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("パソコン", 103145, 241, "パソコン", 4, 0);
insert into items(item_name, item_price, item_count, description, seller, image_num) VALUES("マウス", 3210, 513, "最新マウス", 4, 0);



/*
 * 		Item_Review
 * 
 * 	商品のレビューテーブル
 * 
 */
drop table if exists item_review;
create table item_review(
	id int not null primary key auto_increment,
	item_id int not null,
	user_id int not null,
	title VARCHAR(255) not null,
	point int not null,
	comment text,
	insert_date datetime DEFAULT CURRENT_TIMESTAMP
);



/*
 * 		PurchaseHistorys
 * 
 * 	商品の購入履歴テーブル
 * 
 */
drop table if exists purchaseHistorys;
create table purchaseHistorys(
	id int not null primary key auto_increment,
	item_id int not null,
	quantity int not null,
	user_id int not null,
	address VARCHAR(255) NOT NULL,
	phoneNumber VARCHAR(255) NOT NULL,
	shipmentState int NOT NULL,
	insert_date datetime DEFAULT CURRENT_TIMESTAMP,
	request_date datetime
);



/*
 * 		Sales
 * 
 * 	各アイテムの売り上げテーブル
 * 
 */
drop table if exists sales;
create table sales(
	item_id int not null,
	year int not null,
	month int not null,
	quantity int not null
);



/*
 * 		Sellers
 * 
 * 	販売業者テーブル
 * 
 */
drop table if exists sellers;
create table sellers(
	id int not null primary key auto_increment,
	name VARCHAR(255) not null
	address VARCHAR(255) not null,
	mail VARCHAR(255) not null,
	phone VARCHAR(255) not null,
	description VARCHAR(255) not null
);
INSERT INTO sellers(name, address, mail, phone, description) VALUES ("ABC通信販売", "東京都港区XXX1-1-1 YYYビル", "ABC通信販売です。よろしくお願い致します。");
INSERT INTO sellers(name, address, mail, phone, description) VALUES ("いろは文具", "東京都江東区XXX1-1-1 YYYビル", "いろは文具です。文具を扱っています。");
INSERT INTO sellers(name, address, mail, phone, description) VALUES ("大阪飲料販売", "大阪府大阪市XXX1-1-1 YYYビル", "大阪飲料販売です。よろしくお願い致します。");
INSERT INTO sellers(name, address, mail, phone, description) VALUES ("Computer", "東京都港区XXX1-1-1 YYYビル", "コンピューター関連の商品を取り扱っています");


/*
 * 		Users
 * 
 * 	ユーザーテーブル
 * 
 */
drop table if exists users;
create table users(
	id int not null primary key auto_increment,
	login_id varchar(16) unique,
	login_pass varchar(255),
	user_name varchar(60),
	insert_date datetime DEFAULT CURRENT_TIMESTAMP
);
insert into users(admin, oauthUser, login_id, login_pass, email, user_name) VALUES(1, 0, "admin","2e7d01869cd65058cb884c7c039b804bc76d2a259f6143e84a86980e7cdfe23a", "管理者");
