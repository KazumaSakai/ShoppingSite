package com.internousdev.ShoppingSite.oauth;

import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

import com.internousdev.ShoppingSite.util.Passworder;

public class GoogleOAuth {
	private static final String client_id = "34746352072-tv6neqgl7uhuqutiqm5e93e4sbhn43li.apps.googleusercontent.com";
	private static final String client_secret = "_H9AFED1Qxt4rcgYCgHaLtEp ";
	
	public static String access_token(String code)
	{
		String callBackURL = "http://localhost:8080/ShoppingSite/GoogleOauthAction.action";
		
		String tokenURL = "https://accounts.google.com/o/oauth2/token?"
				+ "code=" + code
				+ "&grant_type=authorization_code"
				+ "&redirect_uri=" + callBackURL
				+ "&client_id=" + client_id
				+ "&client_secret=" + client_secret;
		System.out.println(tokenURL);
		
		return null;
	}
	
	public static String login()
	{
		String redirect_uri = "http://localhost:8080/ShoppingSite/GoogleOauthAction.action";
		try
		{
			Desktop desktop = Desktop.getDesktop();
			try
			{
				URI uri = new URI("https://accounts.google.com/o/oauth2/auth?client_id=" + client_id
						+ "&redirect_uri=" + redirect_uri
						+ "&scope=https://www.googleapis.com/auth/userinfo.profile"
						+ "&response_type=code"
						+ "&access_type=offline"
						+ "&approval_prompt=force"
						+ "&state=" + Passworder.Random());
				
				desktop.browse(uri);
			}
			catch (URISyntaxException e)
			{
				e.printStackTrace();
			}
			catch (IOException e)
			{
				e.printStackTrace();
			}
		}
		catch (Exception e) 
		{
			e.printStackTrace();
		}
		
		return null;
	}
}
